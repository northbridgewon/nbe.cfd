<html><head><base href="https://websim.ai" />
<title>Customizable Galactic Chess Arena</title>
<meta name="description" content="Experience a fully functional cosmic chess game with customizable piece colors. Enjoy enhanced pawn movement in this stellar online chess platform.">
<style>
  body {
    font-family: 'Orbitron', sans-serif;
    background: #0c0c1d url('https://websim.ai/assets/space-background.jpg') no-repeat center center fixed;
    background-size: cover;
    color: #e6e6fa;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100vh;
    margin: 0;
    overflow: hidden;
  }
  .container {
    background: rgba(25, 25, 112, 0.7);
    border-radius: 15px;
    padding: 20px;
    box-shadow: 0 0 20px #9370db;
  }
  h1 {
    text-align: center;
    color: #9370db;
    text-shadow: 0 0 10px #4b0082;
  }
  .chessboard {
    width: 400px;
    height: 400px;
    margin: 0 auto;
    border: 2px solid #9370db;
    border-radius: 5px;
    box-shadow: 0 0 15px #4b0082;
    display: grid;
    grid-template-columns: repeat(8, 1fr);
  }
  .square {
    width: 50px;
    height: 50px;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 30px;
    transition: all 0.3s ease;
    cursor: pointer;
  }
  .square:hover {
    transform: scale(1.1);
    box-shadow: 0 0 10px #e6e6fa;
  }
  .light {
    background-color: #9370db;
  }
  .dark {
    background-color: #4b0082;
  }
  .controls {
    display: flex;
    justify-content: space-around;
    margin-top: 20px;
  }
  button {
    background-color: #9370db;
    color: #fff;
    border: none;
    padding: 10px 20px;
    border-radius: 5px;
    cursor: pointer;
    transition: all 0.3s ease;
  }
  button:hover {
    background-color: #4b0082;
    box-shadow: 0 0 10px #e6e6fa;
  }
  .selected {
    background-color: rgba(255, 255, 0, 0.5) !important;
  }
  .valid-move {
    background-color: rgba(0, 255, 0, 0.3) !important;
  }
  .status {
    text-align: center;
    margin-top: 10px;
    font-size: 18px;
  }
  .color-picker {
    display: flex;
    justify-content: space-around;
    margin-top: 10px;
  }
  .color-picker input {
    width: 50px;
    height: 30px;
    cursor: pointer;
  }
  @keyframes twinkle {
    0% { opacity: 0.5; }
    50% { opacity: 1; }
    100% { opacity: 0.5; }
  }
  .star {
    position: absolute;
    width: 2px;
    height: 2px;
    background: white;
    border-radius: 50%;
    animation: twinkle 1s infinite;
  }
</style>
</head>
<body>
  <div class="container">
    <h1>Customizable Galactic Chess Arena</h1>
    <div class="chessboard" id="board"></div>
    <div class="controls">
      <button onclick="newGame()">New Game</button>
    </div>
    <div class="color-picker">
      <div>
        <label for="whiteColor">White:</label>
        <input type="color" id="whiteColor" value="#ffffff" onchange="updatePieceColors()">
      </div>
      <div>
        <label for="blackColor">Black:</label>
        <input type="color" id="blackColor" value="#000000" onchange="updatePieceColors()">
      </div>
    </div>
    <div class="status" id="status"></div>
  </div>

  <script>
    const pieces = {
      'white': {
        'king': '♔', 'queen': '♕', 'rook': '♖',
        'bishop': '♗', 'knight': '♘', 'pawn': '♙'
      },
      'black': {
        'king': '♚', 'queen': '♛', 'rook': '♜',
        'bishop': '♝', 'knight': '♞', 'pawn': '♟'
      }
    };

    let board = [];
    let selectedPiece = null;
    let currentPlayer = 'white';

    function createBoard() {
      const boardElement = document.getElementById('board');
      boardElement.innerHTML = '';
      for (let i = 0; i < 8; i++) {
        board[i] = [];
        for (let j = 0; j < 8; j++) {
          const square = document.createElement('div');
          square.className = `square ${(i + j) % 2 === 0 ? 'light' : 'dark'}`;
          square.dataset.row = i;
          square.dataset.col = j;
          square.addEventListener('click', handleSquareClick);
          boardElement.appendChild(square);
          board[i][j] = null;
        }
      }
    }

    function setupPieces() {
      const initialSetup = [
        ['rook', 'knight', 'bishop', 'queen', 'king', 'bishop', 'knight', 'rook'],
        ['pawn', 'pawn', 'pawn', 'pawn', 'pawn', 'pawn', 'pawn', 'pawn'],
        Array(8).fill(null),
        Array(8).fill(null),
        Array(8).fill(null),
        Array(8).fill(null),
        ['pawn', 'pawn', 'pawn', 'pawn', 'pawn', 'pawn', 'pawn', 'pawn'],
        ['rook', 'knight', 'bishop', 'queen', 'king', 'bishop', 'knight', 'rook']
      ];

      for (let i = 0; i < 8; i++) {
        for (let j = 0; j < 8; j++) {
          const piece = initialSetup[i][j];
          if (piece) {
            const color = i < 2 ? 'black' : 'white';
            board[i][j] = { type: piece, color: color, hasMoved: false };
            const square = document.querySelector(`[data-row="${i}"][data-col="${j}"]`);
            square.textContent = pieces[color][piece];
          }
        }
      }
      updatePieceColors();
    }

    function handleSquareClick(event) {
      const row = parseInt(event.target.dataset.row);
      const col = parseInt(event.target.dataset.col);

      if (selectedPiece) {
        const validMoves = getValidMoves(selectedPiece.row, selectedPiece.col);
        if (validMoves.some(move => move.row === row && move.col === col)) {
          movePiece(selectedPiece.row, selectedPiece.col, row, col);
          clearSelection();
          currentPlayer = currentPlayer === 'white' ? 'black' : 'white';
          updateStatus();
        } else {
          clearSelection();
          selectPiece(row, col);
        }
      } else {
        selectPiece(row, col);
      }
    }

    function selectPiece(row, col) {
      const piece = board[row][col];
      if (piece && piece.color === currentPlayer) {
        selectedPiece = { row, col };
        document.querySelector(`[data-row="${row}"][data-col="${col}"]`).classList.add('selected');
        highlightValidMoves(row, col);
      }
    }

    function clearSelection() {
      if (selectedPiece) {
        document.querySelector(`[data-row="${selectedPiece.row}"][data-col="${selectedPiece.col}"]`).classList.remove('selected');
        document.querySelectorAll('.valid-move').forEach(square => square.classList.remove('valid-move'));
        selectedPiece = null;
      }
    }

    function highlightValidMoves(row, col) {
      const validMoves = getValidMoves(row, col);
      validMoves.forEach(move => {
        document.querySelector(`[data-row="${move.row}"][data-col="${move.col}"]`).classList.add('valid-move');
      });
    }

    function getValidMoves(row, col) {
      const piece = board[row][col];
      if (!piece) return [];

      const moves = [];
      const directions = {
        'pawn': piece.color === 'white' ? [[-1, 0]] : [[1, 0]],
        'rook': [[0, 1], [1, 0], [0, -1], [-1, 0]],
        'knight': [[2, 1], [2, -1], [-2, 1], [-2, -1], [1, 2], [1, -2], [-1, 2], [-1, -2]],
        'bishop': [[1, 1], [1, -1], [-1, 1], [-1, -1]],
        'queen': [[0, 1], [1, 0], [0, -1], [-1, 0], [1, 1], [1, -1], [-1, 1], [-1, -1]],
        'king': [[0, 1], [1, 0], [0, -1], [-1, 0], [1, 1], [1, -1], [-1, 1], [-1, -1]]
      };

      if (piece.type === 'pawn') {
        const direction = piece.color === 'white' ? -1 : 1;
        if (!board[row + direction][col]) {
          moves.push({ row: row + direction, col: col });
          if (!piece.hasMoved && !board[row + 2 * direction][col]) {
            moves.push({ row: row + 2 * direction, col: col });
          }
        }
        // Add diagonal capture moves
        if (col > 0 && board[row + direction][col - 1] && board[row + direction][col - 1].color !== piece.color) {
          moves.push({ row: row + direction, col: col - 1 });
        }
        if (col < 7 && board[row + direction][col + 1] && board[row + direction][col + 1].color !== piece.color) {
          moves.push({ row: row + direction, col: col + 1 });
        }
      } else {
        directions[piece.type].forEach(([dr, dc]) => {
          let r = row + dr;
          let c = col + dc;
          while (r >= 0 && r < 8 && c >= 0 && c < 8) {
            if (!board[r][c] || board[r][c].color !== piece.color) {
              moves.push({ row: r, col: c });
            }
            if (board[r][c] || piece.type === 'knight' || piece.type === 'king') break;
            r += dr;
            c += dc;
          }
        });
      }

      return moves;
    }

    function movePiece(fromRow, fromCol, toRow, toCol) {
      const piece = board[fromRow][fromCol];
      board[toRow][toCol] = piece;
      board[fromRow][fromCol] = null;
      piece.hasMoved = true;
      updateBoardDisplay();
    }

    function updateBoardDisplay() {
      for (let i = 0; i < 8; i++) {
        for (let j = 0; j < 8; j++) {
          const square = document.querySelector(`[data-row="${i}"][data-col="${j}"]`);
          const piece = board[i][j];
          square.textContent = piece ? pieces[piece.color][piece.type] : '';
        }
      }
      updatePieceColors();
    }

    function updateStatus() {
      document.getElementById('status').textContent = `Current player: ${currentPlayer}`;
    }

    function newGame() {
      createBoard();
      setupPieces();
      currentPlayer = 'white';
      updateStatus();
    }

    function updatePieceColors() {
      const whiteColor = document.getElementById('whiteColor').value;
      const blackColor = document.getElementById('blackColor').value;
      document.querySelectorAll('.square').forEach(square => {
        if (square.textContent) {
          square.style.color = square.textContent.charCodeAt(0) >= 9812 && square.textContent.charCodeAt(0) <= 9817 ? whiteColor : blackColor;
        }
      });
    }

    function createStars() {
      for (let i = 0; i < 100; i++) {
        const star = document.createElement('div');
        star.className = 'star';
        star.style.left = `${Math.random() * 100}%`;
        star.style.top = `${Math.random() * 100}%`;
        star.style.animationDelay = `${Math.random() * 1}s`;
        document.body.appendChild(star);
      }
    }

    createBoard();
    setupPieces();
    createStars();
    updateStatus();
  </script>
</body></html>