<html><head><base href="https://sculptor.com"><title>Sculptor - Modern 3D Sculpting Tool</title><script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script><style>
body {
    margin: 0;
    overflow: hidden;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-color: #121212;
    color: #ffffff;
}
#info {
    position: absolute;
    top: 20px;
    width: 100%;
    text-align: center;
    z-index: 100;
    font-size: 14px;
    line-height: 1.5;
    background-color: rgba(0,0,0,0.7);
    padding: 10px;
    backdrop-filter: blur(5px);
}
#brushCursor {
    position: absolute;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    border: 2px solid #ffffff;
    pointer-events: none;
    display: none;
    transition: all 0.1s ease;
}
#controls {
    position: absolute;
    bottom: 30px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    gap: 20px;
    background-color: rgba(255,255,255,0.1);
    padding: 15px;
    border-radius: 30px;
    backdrop-filter: blur(10px);
}
.control-icon {
    width: 50px;
    height: 50px;
    background-color: rgba(255,255,255,0.2);
    border-radius: 50%;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
    transition: all 0.3s ease;
    color: #4CAF50;
}
.control-icon:hover {
    background-color: rgba(255,255,255,0.3);
    transform: scale(1.1);
}
#slider-container {
    position: absolute;
    bottom: 100px;
    left: 50%;
    transform: translateX(-50%);
    background-color: rgba(0,0,0,0.7);
    padding: 15px;
    border-radius: 15px;
    display: none;
    backdrop-filter: blur(10px);
}
#slider {
    width: 250px;
    -webkit-appearance: none;
    background: rgba(255,255,255,0.2);
    outline: none;
    border-radius: 15px;
}
#slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 25px;
    height: 25px;
    border-radius: 50%;
    background: #4CAF50;
    cursor: pointer;
}
#brushes {
    position: absolute;
    top: 100px;
    left: 30px;
    display: flex;
    flex-direction: column;
    gap: 15px;
}
.brush-btn {
    padding: 10px 20px;
    background-color: rgba(255,255,255,0.1);
    border: none;
    border-radius: 25px;
    cursor: pointer;
    color: #ffffff;
    font-size: 14px;
    transition: all 0.3s ease;
}
.brush-btn:hover {
    background-color: rgba(255,255,255,0.2);
    transform: translateX(5px);
}
.brush-btn.active {
    background-color: #4CAF50;
    box-shadow: 0 0 15px rgba(76,175,80,0.5);
}
#light-control, #color-control {
    position: absolute;
    bottom: 30px;
    width: 50px;
    height: 50px;
    background-color: rgba(255,255,255,0.2);
    border-radius: 50%;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
    transition: all 0.3s ease;
    color: #4CAF50;
}
#light-control {
    right: 30px;
}
#color-control {
    right: 90px;
}
#light-control:hover, #color-control:hover {
    background-color: rgba(255,255,255,0.3);
    transform: scale(1.1);
}
</style></head><body>
<div id="info">
    Sculptor - Modern 3D Sculpting Tool<br>
    Click and drag to sculpt • Hold Shift and drag to rotate • Use brush buttons to change type
</div>
<div id="brushCursor"></div>
<div id="controls">
    <div class="control-icon" data-param="brushSize">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
            <circle cx="12" cy="12" r="5" fill="currentColor"/>
        </svg>
    </div>
    <div class="control-icon" data-param="brushStrength">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 2V22M17 12H7" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
    </div>
    <div class="control-icon" data-param="smoothness">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M3 12C3 12 7 4 12 4C17 4 21 12 21 12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
    </div>
    <div class="control-icon" data-param="subdivide">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect x="4" y="4" width="16" height="16" stroke="currentColor" stroke-width="2"/>
            <line x1="12" y1="4" x2="12" y2="20" stroke="currentColor" stroke-width="2"/>
            <line x1="4" y1="12" x2="20" y2="12" stroke="currentColor" stroke-width="2"/>
        </svg>
    </div>
</div>
<div id="slider-container">
    <input type="range" id="slider" min="0" max="100" value="50">
    <span id="slider-value"></span>
</div>
<div id="brushes">
    <button class="brush-btn active" data-brush="inflate">Inflate</button>
    <button class="brush-btn" data-brush="deflate">Deflate</button>
</div>
<div id="light-control">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="12" cy="12" r="5" fill="currentColor"/>
        <line x1="12" y1="1" x2="12" y2="3" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        <line x1="12" y1="21" x2="12" y2="23" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        <line x1="1" y1="12" x2="3" y2="12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        <line x1="21" y1="12" x2="23" y2="12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
    </svg>
</div>
<div id="color-control">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="12" cy="12" r="10" fill="currentColor"/>
        <path d="M12 6V18M6 12H18" stroke="white" stroke-width="2" stroke-linecap="round"/>
    </svg>
</div>
<script>
let scene, camera, renderer, sphere, raycaster, mouse, brushCursor;
let isMouseDown = false;
let isShiftDown = false;
let previousMousePosition = { x: 0, y: 0 };
let currentBrush = 'inflate';
let directionalLight;

const params = {
    brushSize: 0.2,
    brushStrength: 0.02,
    smoothness: 0.7,
    subdivisions: 128,
    sphereColor: 0xcccccc,
    metalness: 0.5,
    roughness: 0.3
};

function init() {
    scene = new THREE.Scene();
    camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
    camera.position.z = 2;

    renderer = new THREE.WebGLRenderer({ antialias: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.appendChild(renderer.domElement);

    updateSphere();

    raycaster = new THREE.Raycaster();
    mouse = new THREE.Vector2();

    brushCursor = document.getElementById('brushCursor');

    window.addEventListener('mousemove', onMouseMove, false);
    window.addEventListener('mousedown', onMouseDown, false);
    window.addEventListener('mouseup', onMouseUp, false);
    window.addEventListener('contextmenu', (e) => e.preventDefault(), false);
    window.addEventListener('resize', onWindowResize, false);
    window.addEventListener('keydown', onKeyDown, false);
    window.addEventListener('keyup', onKeyUp, false);

    setupControls();
    setupBrushes();
    setupLightControl();
    setupColorControl();

    const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
    scene.add(ambientLight);

    directionalLight = new THREE.DirectionalLight(0xffffff, 0.5);
    directionalLight.position.set(1, 1, 1);
    scene.add(directionalLight);

    animate();
}

function updateSphere() {
    if (sphere) scene.remove(sphere);
    const geometry = new THREE.SphereGeometry(1, params.subdivisions, params.subdivisions);
    const material = new THREE.MeshStandardMaterial({
        color: params.sphereColor,
        roughness: params.roughness,
        metalness: params.metalness,
        flatShading: false
    });
    sphere = new THREE.Mesh(geometry, material);
    scene.add(sphere);
}

function onMouseMove(event) {
    mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
    mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;

    brushCursor.style.left = event.clientX - 10 + 'px';
    brushCursor.style.top = event.clientY - 10 + 'px';

    if (isShiftDown) {
        rotateCamera(event);
    } else if (isMouseDown) {
        sculptSphere();
    }

    previousMousePosition = {
        x: event.clientX,
        y: event.clientY
    };
}

function onMouseDown(event) {
    isMouseDown = true;
    brushCursor.style.display = 'block';
}

function onMouseUp(event) {
    isMouseDown = false;
    brushCursor.style.display = 'none';
}

function onKeyDown(event) {
    if (event.shiftKey) isShiftDown = true;
}

function onKeyUp(event) {
    if (!event.shiftKey) isShiftDown = false;
}

function rotateCamera(event) {
    const deltaMove = {
        x: event.clientX - previousMousePosition.x,
        y: event.clientY - previousMousePosition.y
    };

    const rotationSpeed = 0.002;
    const sphereCenter = new THREE.Vector3(0, 0, 0);

    camera.position.sub(sphereCenter);
    camera.position.applyAxisAngle(new THREE.Vector3(0, 1, 0), -deltaMove.x * rotationSpeed);
    camera.position.applyAxisAngle(new THREE.Vector3(1, 0, 0), -deltaMove.y * rotationSpeed);
    camera.position.add(sphereCenter);

    camera.lookAt(sphereCenter);
}

function sculptSphere() {
    raycaster.setFromCamera(mouse, camera);
    const intersects = raycaster.intersectObject(sphere);

    if (intersects.length > 0) {
        const intersect = intersects[0];
        const geometry = sphere.geometry;
        const positions = geometry.attributes.position;

        for (let i = 0; i < positions.count; i++) {
            const vertex = new THREE.Vector3().fromBufferAttribute(positions, i);
            const distance = vertex.distanceTo(intersect.point);

            if (distance < params.brushSize) {
                const falloff = 1 - (distance / params.brushSize);
                let displacement = new THREE.Vector3();

                switch (currentBrush) {
                    case 'inflate':
                        displacement = vertex.clone().sub(sphere.position).normalize().multiplyScalar(falloff * params.brushStrength);
                        break;
                    case 'deflate':
                        displacement = vertex.clone().sub(sphere.position).normalize().multiplyScalar(-falloff * params.brushStrength);
                        break;
                }

                vertex.add(displacement);
                positions.setXYZ(i, vertex.x, vertex.y, vertex.z);
            }
        }

        positions.needsUpdate = true;
        geometry.computeVertexNormals();
    }
}

function animate() {
    requestAnimationFrame(animate);
    renderer.render(scene, camera);
}

function onWindowResize() {
    camera.aspect = window.innerWidth / window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth, window.innerHeight);
}

function setupControls() {
    const controls = document.getElementById('controls');
    const sliderContainer = document.getElementById('slider-container');
    const slider = document.getElementById('slider');
    const sliderValue = document.getElementById('slider-value');

    controls.addEventListener('click', (event) => {
        if (event.target.closest('.control-icon')) {
            const controlIcon = event.target.closest('.control-icon');
            const param = controlIcon.dataset.param;
            if (param === 'subdivide') {
                params.subdivisions = Math.min(params.subdivisions * 2, 256);
                updateSphere();
            } else {
                sliderContainer.style.display = 'block';
                
                slider.min = '0';
                slider.max = '100';
                slider.value = params[param] * 100;
                sliderValue.textContent = params[param].toFixed(2);

                slider.oninput = () => {
                    let value = slider.value / 100;
                    params[param] = value;
                    sliderValue.textContent = value.toFixed(2);
                };
            }
        }
    });
}

function setupBrushes() {
    const brushes = document.getElementById('brushes');
    brushes.addEventListener('click', (event) => {
        if (event.target.classList.contains('brush-btn')) {
            const brushType = event.target.dataset.brush;
            currentBrush = brushType;
            
            // Update active brush button
            document.querySelectorAll('.brush-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
        }
    });
}

function setupLightControl() {
    const lightControl = document.getElementById('light-control');
    let angle = 0;

    lightControl.addEventListener('click', () => {
        angle += Math.PI / 4;
        const radius = 2;
        const x = Math.cos(angle) * radius;
        const z = Math.sin(angle) * radius;
        directionalLight.position.set(x, 1, z);
    });
}

function setupColorControl() {
    const colorControl = document.getElementById('color-control');
    const colors = [
        0xcccccc, // Light gray
        0x7f7f7f, // Medium gray
        0x4d4d4d, // Dark gray
        0x8B4513, // Saddle Brown
        0x556B2F, // Dark Olive Green
        0x4682B4, // Steel Blue
        0x800020  // Burgundy
    ];
    let colorIndex = 0;

    colorControl.addEventListener('click', () => {
        colorIndex = (colorIndex + 1) % colors.length;
        params.sphereColor = colors[colorIndex];
        sphere.material.color.setHex(params.sphereColor);
    });
}

init();
</script>
</body></html>