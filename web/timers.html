<html><head><base href="https://websim.ai" />
<title>üçÖ TaskTock - Neumorphic Task Management with Timers</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@300;400;500;600&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/sortablejs@1.14.0/Sortable.min.js"></script>
<style>
  :root {
    --neumorphic-light: #e0e5ec;
    --neumorphic-dark: #a3b1c6;
    --neumorphic-flat: #e0e5ec;
    --neumorphic-text: #2d3748;
    --neumorphic-outline: #8d99ae;
    --button-text: #2d3748;
    --timer-active: #10B981;
  }

  body {
    background-color: var(--neumorphic-light);
    color: var(--neumorphic-text);
    font-family: 'IBM Plex Mono', monospace;
    transition: background-color 0.3s ease, color 0.3s ease;
  }

  body.dark-mode {
    --neumorphic-light: #1a202c;
    --neumorphic-dark: #2d3748;
    --neumorphic-flat: #2d3748;
    --neumorphic-text: #e2e8f0;
    --neumorphic-outline: #4a5568;
    --button-text: #e2e8f0;
    --timer-active: #34D399;
  }

  .neumorphic-card {
    background: var(--neumorphic-flat);
    border-radius: 20px;
    border: 2px solid var(--neumorphic-outline);
    transition: background 0.3s ease, border-color 0.3s ease;
  }

  .neumorphic-inset {
    background: var(--neumorphic-flat);
    border: 2px solid var(--neumorphic-outline);
    border-radius: 10px;
    transition: background 0.3s ease, border-color 0.3s ease;
  }

  .neumorphic-button {
    background: var(--neumorphic-flat);
    border-radius: 10px;
    border: 2px solid var(--neumorphic-outline);
    transition: all 0.2s ease;
    color: var(--button-text);
    box-shadow: 3px 3px 6px rgba(0, 0, 0, 0.1), -3px -3px 6px rgba(255, 255, 255, 0.1);
  }

  .neumorphic-button:hover {
    background: var(--neumorphic-light);
    box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1), -2px -2px 4px rgba(255, 255, 255, 0.1);
  }

  .neumorphic-button:active {
    background: var(--neumorphic-dark);
    box-shadow: inset 2px 2px 4px rgba(0, 0, 0, 0.1), inset -2px -2px 4px rgba(255, 255, 255, 0.1);
  }

  .timer-input {
    background: transparent;
    border: none;
    font-size: 2.5rem;
    font-weight: 300;
    width: 3ch;
    text-align: center;
    -moz-appearance: textfield;
    color: var(--neumorphic-text);
    transition: color 0.3s ease;
  }
  .timer-input::-webkit-inner-spin-button, 
  .timer-input::-webkit-outer-spin-button { 
    -webkit-appearance: none; 
    margin: 0; 
  }
  .timer-input:focus {
    outline: none;
  }
  .timer-running {
    color: var(--timer-active);
  }
  .timer-running .timer-input {
    color: var(--timer-active);
  }
  .task-name-input {
    background: transparent;
    border: none;
    font-size: 0.875rem;
    padding: 2px;
    transition: all 0.3s ease;
    color: var(--neumorphic-text);
  }
  .task-name-input:focus {
    outline: none;
  }
  .inline-timer {
    font-weight: 500;
    padding: 2px 6px;
    border-radius: 10px;
    font-size: 0.75rem;
    min-width: 50px;
    text-align: center;
    cursor: pointer;
    transition: all 0.3s ease;
  }
  .inline-timer-stopped {
    background-color: var(--neumorphic-flat);
    color: var(--neumorphic-text);
  }
  .inline-timer-running {
    background-color: #D1FAE5;
    color: #059669;
  }
  .inline-timer:hover {
    opacity: 0.8;
  }
  .timer-control-btn {
    width: 48px;
    height: 48px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    transition: all 0.3s ease;
    font-size: 1.25rem;
  }
  .mini-timer-icon {
    font-size: 0.625rem;
    margin-right: 2px;
  }
  .end-time {
    font-size: 0.875rem;
    color: var(--neumorphic-text);
    margin-top: 4px;
    transition: color 0.3s ease;
  }
  .adjust-time-btn {
    font-size: 0.875rem;
    padding: 4px 8px;
    border-radius: 10px;
    transition: all 0.3s ease;
    width: 48px;
    height: 48px;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .task-controls {
    display: flex;
    align-items: center;
  }
  .task-controls > *:not(:last-child) {
    margin-right: 15px;
  }
  .global-control {
    display: flex;
    justify-content: center;
    align-items: center;
    margin-bottom: 20px;
  }
  .global-control-btn {
    font-size: 1rem;
    padding: 8px 16px;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: #4a5568;
    color: #ffffff;
  }
  .global-control-btn:hover {
    background-color: #2d3748;
  }
  .global-control-btn i {
    margin-right: 8px;
  }
  #addNewTaskBtn {
    background-color: #4a5568;
    color: #ffffff;
  }
  #addNewTaskBtn:hover {
    background-color: #2d3748;
  }
  .sortable-ghost {
    opacity: 0.5;
  }
  .drag-handle {
    cursor: move;
    padding: 8px;
    color: var(--neumorphic-outline);
    transition: color 0.3s ease;
  }
  #darkModeToggle {
    background-color: var(--neumorphic-flat);
    color: var(--neumorphic-text);
    border: 2px solid var(--neumorphic-outline);
    border-radius: 10px;
    padding: 10px 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s ease;
    font-size: 1.5rem;
    font-weight: 600;
  }
  #darkModeToggle:hover {
    background-color: var(--neumorphic-light);
  }
</style>
</head>
<body class="p-4">
  <div class="max-w-full sm:max-w-md md:max-w-lg lg:max-w-xl mx-auto">
    <button id="darkModeToggle" class="neumorphic-button w-full mb-6">
      <span>üçÖ TaskTock</span>
    </button>
    
    <div class="global-control">
      <button id="globalControlBtn" class="neumorphic-button global-control-btn">
        <i class="fas fa-play-circle"></i>
        Start All Timers
      </button>
    </div>
    
    <div id="taskList" class="space-y-4">
      <!-- Tasks will be dynamically inserted here -->
    </div>

    <div class="mt-6 neumorphic-card p-4">
      <div class="flex space-x-2 relative">
        <input type="text" id="newTaskName" placeholder="Add New Task" class="flex-grow p-2 neumorphic-inset rounded-lg text-sm sm:text-base">
        <button id="addNewTaskBtn" class="neumorphic-button font-medium py-2 px-3 sm:px-4 transition duration-300 ease-in-out text-sm sm:text-base">Add</button>
      </div>
    </div>
  </div>

  <script>
    let tasks = [
      { name: 'Complete project proposal', id: 'proposal', timeLeft: 25 * 60, isRunning: false, isExpanded: false },
      { name: 'Review code changes', id: 'code-review', timeLeft: 15 * 60, isRunning: false, isExpanded: false },
      { name: 'Prepare presentation', id: 'presentation', timeLeft: 30 * 60, isRunning: false, isExpanded: false }
    ];

    let globalTimerRunning = false;
    let currentTaskIndex = 0;

    function createTaskItem(task) {
      const taskEl = document.createElement('div');
      taskEl.className = 'neumorphic-card p-4';
      taskEl.dataset.id = task.id;
      taskEl.innerHTML = `
        <div class="flex items-center justify-between">
          <span class="drag-handle"><i class="fas fa-grip-vertical"></i></span>
          <span class="inline-timer neumorphic-inset ${task.isRunning ? 'inline-timer-running' : 'inline-timer-stopped'}" data-id="${task.id}">
            <i class="fas ${task.isRunning ? 'fa-pause' : 'fa-play'} mini-timer-icon"></i>
            ${formatTime(task.timeLeft)}
          </span>
          <div class="flex-grow flex items-center space-x-2 ml-2">
            <input type="text" class="task-name-input flex-grow neumorphic-inset rounded-lg px-2" value="${task.name}" data-id="${task.id}">
          </div>
          <div class="task-controls">
            <button class="toggleTimerBtn neumorphic-button p-2" data-id="${task.id}">
              <i class="fas ${task.isExpanded ? 'fa-chevron-up' : 'fa-chevron-down'}"></i>
            </button>
            <button class="deleteTaskBtn neumorphic-button p-2 text-red-500" data-id="${task.id}">
              <i class="fas fa-trash"></i>
            </button>
          </div>
        </div>
        <div class="timer-container mt-3 ${task.isExpanded ? '' : 'hidden'}">
          <h2 class="text-4xl font-light text-center mb-2 timer ${task.isRunning ? 'timer-running' : ''}" data-id="${task.id}">
            <input type="number" class="timer-input minutes" value="${Math.floor(task.timeLeft / 60).toString().padStart(2, '0')}" min="0" max="99" data-id="${task.id}">
            <span>:</span>
            <input type="number" class="timer-input seconds" value="${(task.timeLeft % 60).toString().padStart(2, '0')}" min="0" max="59" data-id="${task.id}">
          </h2>
          <div class="text-center end-time" data-id="${task.id}">${getEndTime(task.timeLeft)}</div>
          <div class="flex justify-center items-center space-x-4 mt-4">
            <button class="adjust-time-btn neumorphic-button" data-id="${task.id}" data-adjust="-5">-5</button>
            <button class="playPauseBtn timer-control-btn neumorphic-button ${task.isRunning ? 'text-yellow-600' : 'text-green-600'}" data-id="${task.id}">
              <i class="fas ${task.isRunning ? 'fa-pause' : 'fa-play'}"></i>
            </button>
            <button class="resetBtn timer-control-btn neumorphic-button text-red-600" data-id="${task.id}">
              <i class="fas fa-undo"></i>
            </button>
            <button class="adjust-time-btn neumorphic-button" data-id="${task.id}" data-adjust="+5">+5</button>
          </div>
        </div>
      `;
      return taskEl;
    }

    function formatTime(seconds) {
      const minutes = Math.floor(seconds / 60);
      const remainingSeconds = seconds % 60;
      return `${minutes.toString().padStart(2, '0')}:${remainingSeconds.toString().padStart(2, '0')}`;
    }

    function getEndTime(seconds) {
      const now = new Date();
      const endTime = new Date(now.getTime() + seconds * 1000);
      return `Ends at ${endTime.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}`;
    }

    function updateTaskList() {
      const taskListContainer = document.getElementById('taskList');
      taskListContainer.innerHTML = '';
      tasks.forEach(task => {
        taskListContainer.appendChild(createTaskItem(task));
      });
      addEventListeners();
      initSortable();
    }

    function addEventListeners() {
      document.querySelectorAll('.playPauseBtn').forEach(btn => {
        btn.addEventListener('click', (e) => toggleTimer(e.target.closest('.playPauseBtn').dataset.id));
      });
      document.querySelectorAll('.resetBtn').forEach(btn => {
        btn.addEventListener('click', (e) => resetTimer(e.target.closest('.resetBtn').dataset.id));
      });
      document.querySelectorAll('.deleteTaskBtn').forEach(btn => {
        btn.addEventListener('click', (e) => deleteTask(e.target.closest('.deleteTaskBtn').dataset.id));
      });
      document.querySelectorAll('.timer-input').forEach(input =>
        {
          input.addEventListener('change', (e) => updateTimerFromInput(e.target));
          input.addEventListener('focus', (e) => e.target.select());
        });
      document.querySelectorAll('.toggleTimerBtn').forEach(btn => {
        btn.addEventListener('click', (e) => toggleTimerExpand(e.target.closest('.toggleTimerBtn').dataset.id));
      });
      document.querySelectorAll('.task-name-input').forEach(input => {
        input.addEventListener('change', (e) => updateTaskName(e.target.dataset.id, e.target.value));
      });
      document.querySelectorAll('.inline-timer').forEach(timer => {
        timer.addEventListener('click', (e) => toggleTimer(e.target.closest('.inline-timer').dataset.id));
      });
      document.querySelectorAll('.adjust-time-btn').forEach(btn => {
        btn.addEventListener('click', (e) => adjustTime(e.target.dataset.id, parseInt(e.target.dataset.adjust)));
      });
    }

    function initSortable() {
      const taskList = document.getElementById('taskList');
      new Sortable(taskList, {
        animation: 150,
        handle: '.drag-handle',
        ghostClass: 'sortable-ghost',
        onEnd: function(evt) {
          const taskElements = Array.from(taskList.children);
          tasks = taskElements.map(el => tasks.find(t => t.id === el.dataset.id));
        }
      });
    }

    function toggleTimer(id) {
      const task = tasks.find(t => t.id === id);
      if (task.isRunning) {
        pauseTimer(id);
      } else {
        startTimer(id);
      }
    }

    function toggleTimerExpand(id) {
      const task = tasks.find(t => t.id === id);
      task.isExpanded = !task.isExpanded;
      updateTaskList();
    }

    function startTimer(id) {
      const task = tasks.find(t => t.id === id);
      if (!task.isRunning) {
        task.isRunning = true;
        disableTimerInputs(id);
        const timerEl = document.querySelector(`.timer[data-id="${id}"]`);
        timerEl.classList.add('timer-running');
        const inlineTimerEl = document.querySelector(`.inline-timer[data-id="${id}"]`);
        inlineTimerEl.classList.remove('inline-timer-stopped');
        inlineTimerEl.classList.add('inline-timer-running');
        inlineTimerEl.querySelector('.mini-timer-icon').classList.remove('fa-play');
        inlineTimerEl.querySelector('.mini-timer-icon').classList.add('fa-pause');
        const playPauseBtn = document.querySelector(`.playPauseBtn[data-id="${id}"]`);
        playPauseBtn.classList.remove('text-green-600');
        playPauseBtn.classList.add('text-yellow-600');
        playPauseBtn.querySelector('i').classList.remove('fa-play');
        playPauseBtn.querySelector('i').classList.add('fa-pause');
        updateEndTime(id);
        task.interval = setInterval(() => {
          task.timeLeft--;
          updateTimerDisplay(id);
          if (task.timeLeft === 0) {
            clearInterval(task.interval);
            task.isRunning = false;
            enableTimerInputs(id);
            timerEl.classList.remove('timer-running');
            inlineTimerEl.classList.remove('inline-timer-running');
            inlineTimerEl.classList.add('inline-timer-stopped');
            inlineTimerEl.querySelector('.mini-timer-icon').classList.remove('fa-pause');
            inlineTimerEl.querySelector('.mini-timer-icon').classList.add('fa-play');
            playPauseBtn.classList.remove('text-yellow-600');
            playPauseBtn.classList.add('text-green-600');
            playPauseBtn.querySelector('i').classList.remove('fa-pause');
            playPauseBtn.querySelector('i').classList.add('fa-play');
            alert(`Time's up for task: ${task.name}!`);
            if (globalTimerRunning) {
              startNextTask();
            }
          }
        }, 1000);
      }
    }

    function pauseTimer(id) {
      const task = tasks.find(t => t.id === id);
      clearInterval(task.interval);
      task.isRunning = false;
      enableTimerInputs(id);
      const timerEl = document.querySelector(`.timer[data-id="${id}"]`);
      timerEl.classList.remove('timer-running');
      const inlineTimerEl = document.querySelector(`.inline-timer[data-id="${id}"]`);
      inlineTimerEl.classList.remove('inline-timer-running');
      inlineTimerEl.classList.add('inline-timer-stopped');
      inlineTimerEl.querySelector('.mini-timer-icon').classList.remove('fa-pause');
      inlineTimerEl.querySelector('.mini-timer-icon').classList.add('fa-play');
      const playPauseBtn = document.querySelector(`.playPauseBtn[data-id="${id}"]`);
      playPauseBtn.classList.remove('text-yellow-600');
      playPauseBtn.classList.add('text-green-600');
      playPauseBtn.querySelector('i').classList.remove('fa-pause');
      playPauseBtn.querySelector('i').classList.add('fa-play');
    }

    function resetTimer(id) {
      const task = tasks.find(t => t.id === id);
      clearInterval(task.interval);
      task.isRunning = false;
      task.timeLeft = 25 * 60;
      updateTimerDisplay(id);
      enableTimerInputs(id);
      const timerEl = document.querySelector(`.timer[data-id="${id}"]`);
      timerEl.classList.remove('timer-running');
      const inlineTimerEl = document.querySelector(`.inline-timer[data-id="${id}"]`);
      inlineTimerEl.classList.remove('inline-timer-running');
      inlineTimerEl.classList.add('inline-timer-stopped');
      inlineTimerEl.querySelector('.mini-timer-icon').classList.remove('fa-pause');
      inlineTimerEl.querySelector('.mini-timer-icon').classList.add('fa-play');
      const playPauseBtn = document.querySelector(`.playPauseBtn[data-id="${id}"]`);
      playPauseBtn.classList.remove('text-yellow-600');
      playPauseBtn.classList.add('text-green-600');
      playPauseBtn.querySelector('i').classList.remove('fa-pause');
      playPauseBtn.querySelector('i').classList.add('fa-play');
      updateEndTime(id);
    }

    function updateTimerDisplay(id) {
      const task = tasks.find(t => t.id === id);
      const minutesInput = document.querySelector(`.timer-input.minutes[data-id="${id}"]`);
      const secondsInput = document.querySelector(`.timer-input.seconds[data-id="${id}"]`);
      minutesInput.value = Math.floor(task.timeLeft / 60).toString().padStart(2, '0');
      secondsInput.value = (task.timeLeft % 60).toString().padStart(2, '0');
      const inlineTimerEl = document.querySelector(`.inline-timer[data-id="${id}"]`);
      inlineTimerEl.lastChild.textContent = formatTime(task.timeLeft);
      updateEndTime(id);
    }

    function updateTimerFromInput(input) {
      const id = input.dataset.id;
      const task = tasks.find(t => t.id === id);
      const minutesInput = document.querySelector(`.timer-input.minutes[data-id="${id}"]`);
      const secondsInput =  document.querySelector(`.timer-input.seconds[data-id="${id}"]`);
      
      let minutes = parseInt(minutesInput.value, 10);
      let seconds = parseInt(secondsInput.value, 10);

      if (isNaN(minutes)) minutes = 0;
      if (isNaN(seconds)) seconds = 0;

      minutes = Math.max(0, Math.min(99, minutes));
      seconds = Math.max(0, Math.min(59, seconds));

      task.timeLeft = minutes * 60 + seconds;
      updateTimerDisplay(id);
    }

    function disableTimerInputs(id) {
      const inputs = document.querySelectorAll(`.timer-input[data-id="${id}"]`);
      inputs.forEach(input => input.disabled = true);
    }

    function enableTimerInputs(id) {
      const inputs = document.querySelectorAll(`.timer-input[data-id="${id}"]`);
      inputs.forEach(input => input.disabled = false);
    }

    function updateTaskName(id, newName) {
      const task = tasks.find(t => t.id === id);
      task.name = newName;
    }

    function deleteTask(id) {
      if (confirm('Are you sure you want to delete this task?')) {
        tasks = tasks.filter(t => t.id !== id);
        updateTaskList();
      }
    }

    function updateEndTime(id) {
      const task = tasks.find(t => t.id === id);
      const endTimeEl = document.querySelector(`.end-time[data-id="${id}"]`);
      endTimeEl.textContent = getEndTime(task.timeLeft);
    }

    function adjustTime(id, minutes) {
      const task = tasks.find(t => t.id === id);
      task.timeLeft = Math.max(0, task.timeLeft + minutes * 60);
      updateTimerDisplay(id);
    }

    function startAllTimers() {
      globalTimerRunning = true;
      currentTaskIndex = 0;
      startNextTask();
    }

    function startNextTask() {
      if (currentTaskIndex < tasks.length) {
        const task = tasks[currentTaskIndex];
        startTimer(task.id);
        currentTaskIndex++;
      } else {
        globalTimerRunning = false;
        alert("All tasks completed!");
        globalControlBtn.innerHTML = '<i class="fas fa-play-circle"></i> Start All Timers';
      }
    }

    const addNewTaskBtn = document.getElementById('addNewTaskBtn');
    const newTaskName = document.getElementById('newTaskName');
    const globalControlBtn = document.getElementById('globalControlBtn');
    const darkModeToggle = document.getElementById('darkModeToggle');

    addNewTaskBtn.addEventListener('click', () => {
      const name = newTaskName.value.trim();
      if (name) {
        const id = name.toLowerCase().replace(/\s+/g, '-');
        tasks.push({ name, id, timeLeft: 25 * 60, isRunning: false, isExpanded: false });
        updateTaskList();
        newTaskName.value = '';
      }
    });

    globalControlBtn.addEventListener('click', () => {
      if (!globalTimerRunning) {
        startAllTimers();
        globalControlBtn.innerHTML = '<i class="fas fa-stop-circle"></i> Stop All Timers';
      } else {
        globalTimerRunning = false;
        tasks.forEach(task => {
          if (task.isRunning) {
            pauseTimer(task.id);
          }
        });
        globalControlBtn.innerHTML = '<i class="fas fa-play-circle"></i> Start All Timers';
      }
    });

    darkModeToggle.addEventListener('click', () => {
      document.body.classList.toggle('dark-mode');
    });

    updateTaskList();
  </script>
</body>
</html>