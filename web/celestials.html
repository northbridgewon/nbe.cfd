<html><head><base href="https://butterfly-fly-black-background%20tanpa%20batas"><title>Butterfly Symphony</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden;
            background-color: #000;
            font-family: Arial, sans-serif;
            color: #fff;
        }
        #canvas {
            position: absolute;
            top: 0;
            left: 0;
        }
        #toggleMenu {
            position: fixed;
            top: 10px;
            left: 10px;
            background-color: rgba(0, 0, 0, 0.5);
            color: white;
            border: none;
            padding: 10px;
            cursor: pointer;
            z-index: 1000;
        }
        #controls {
            position: absolute;
            bottom: 10px;
            left: 10px;
            background-color: rgba(0, 0, 0, 0.7);
            padding: 10px;
            border-radius: 5px;
            display: none;
        }
        #butterflySettings {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(0, 0, 0, 0.9);
            padding: 20px;
            border-radius: 10px;
            display: none;
        }
        button, input, select {
            background-color: #4CAF50;
            border: none;
            color: white;
            padding: 10px 20px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            margin: 4px 2px;
            cursor: pointer;
            border-radius: 5px;
        }
        input, select {
            width: 100px;
        }
        .setting-value {
            display: inline-block;
            width: 40px;
            text-align: right;
            margin-left: 10px;
        }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>
    <button id="toggleMenu">Show Menu</button>
    <div id="controls">
        <button onclick="changeSpeed(0.5)">Slow Down</button>
        <button onclick="changeSpeed(2)">Speed Up</button>
        <br>
        <label for="butterflyCount">Butterfly Count:</label>
        <input type="number" id="butterflyCountInput" value="100" min="1" max="100000" onchange="updateButterflyCount()">
        <button onclick="updateButterflyCount()">Update Count</button>
        <br>
        <label for="ballSize">Ball Size:</label>
        <input type="range" id="ballSize" value="20" min="5" max="100" onchange="updateBallSize()">
        <span id="ballSizeValue" class="setting-value">20</span>
        <br>
        <label for="ballSpeed">Ball Speed:</label>
        <input type="range" id="ballSpeed" value="5" min="1" max="20" onchange="updateBallSpeed()">
        <span id="ballSpeedValue" class="setting-value">5</span>
        <br>
        <button onclick="toggleButterflySettings()">Butterfly Settings</button>
    </div>
    <div id="butterflySettings">
        <h2>Butterfly Settings</h2>
        <label for="butterflySize">Size:</label>
        <input type="range" id="butterflySize" value="15" min="5" max="50" onchange="updateButterflySize()">
        <span id="butterflySizeValue" class="setting-value">15</span>
        <br>
        <label for="butterflySpeed">Speed:</label>
        <input type="range" id="butterflySpeed" value="1" min="0.1" max="5" step="0.1" onchange="updateButterflySpeed()">
        <span id="butterflySpeedValue" class="setting-value">1</span>
        <br>
        <label for="butterflyWanderRadius">Wander Radius:</label>
        <input type="range" id="butterflyWanderRadius" value="150" min="50" max="500" onchange="updateButterflyWanderRadius()">
        <span id="butterflyWanderRadiusValue" class="setting-value">150</span>
        <br>
        <button onclick="toggleButterflySettings()">Close</button>
    </div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        let width = canvas.width = window.innerWidth;
        let height = canvas.height = window.innerHeight;

        let butterflies = [];
        let stars = [];
        let ball;
        let speed = 1;
        let targetButterflyCount = 100;

        class Butterfly {
            constructor() {
                this.x = Math.random() * width;
                this.y = Math.random() * height;
                this.size = Math.random() * 10 + 15;
                this.speed = Math.random() * 2 + 1;
                this.angle = Math.random() * Math.PI * 2;
                this.wingAngle = 0;
                this.bodyColor = `hsl(${Math.random() * 360}, 100%, 50%)`;
                this.wingColor = `hsl(${Math.random() * 360}, 100%, 70%)`;
                this.wanderAngle = Math.random() * Math.PI * 2;
                this.wanderRadius = 150;
            }

            update() {
                this.wanderAngle += (Math.random() - 0.5) * 0.3;
                let wanderX = this.wanderRadius * Math.cos(this.wanderAngle);
                let wanderY = this.wanderRadius * Math.sin(this.wanderAngle);

                let targetX = ball.x + wanderX;
                let targetY = ball.y + wanderY;

                let dx = targetX - this.x;
                let dy = targetY - this.y;
                let targetAngle = Math.atan2(dy, dx);

                let angleDiff = targetAngle - this.angle;
                if (angleDiff > Math.PI) angleDiff -= Math.PI * 2;
                if (angleDiff < -Math.PI) angleDiff += Math.PI * 2;
                this.angle += angleDiff * 0.05;

                this.x += Math.cos(this.angle) * this.speed * speed;
                this.y += Math.sin(this.angle) * this.speed * speed;
                this.wingAngle += 0.3 * speed;

                if (this.x < 0) this.x = width;
                if (this.x > width) this.x = 0;
                if (this.y < 0) this.y = height;
                if (this.y > height) this.y = 0;
            }

            draw() {
                ctx.save();
                ctx.translate(this.x, this.y);
                ctx.rotate(this.angle + Math.PI / 2);

                ctx.fillStyle = this.wingColor;
                ctx.beginPath();
                ctx.moveTo(0, -this.size / 4);
                ctx.bezierCurveTo(
                    this.size / 2 * Math.cos(this.wingAngle), -this.size / 2,
                    this.size / 2 * Math.cos(this.wingAngle), this.size / 2,
                    0, this.size / 4
                );
                ctx.bezierCurveTo(
                    -this.size / 2 * Math.cos(this.wingAngle), this.size / 2,
                    -this.size / 2 * Math.cos(this.wingAngle), -this.size / 2,
                    0, -this.size / 4
                );
                ctx.fill();

                ctx.fillStyle = this.bodyColor;
                ctx.beginPath();
                ctx.ellipse(0, 0, this.size / 8, this.size / 2, 0, 0, Math.PI * 2);
                ctx.fill();

                ctx.fillStyle = this.bodyColor;
                ctx.beginPath();
                ctx.arc(0, -this.size / 2, this.size / 8, 0, Math.PI * 2);
                ctx.fill();

                ctx.strokeStyle = this.bodyColor;
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(0, -this.size / 2);
                ctx.lineTo(-this.size / 4, -this.size * 0.7);
                ctx.moveTo(0, -this.size / 2);
                ctx.lineTo(this.size / 4, -this.size * 0.7);
                ctx.stroke();

                ctx.restore();
            }
        }

        class Star {
            constructor() {
                this.x = Math.random() * width;
                this.y = Math.random() * height;
                this.size = Math.random() * 2;
                this.speed = Math.random() * 0.5 + 0.1;
            }

            update() {
                this.y += this.speed * speed;
                if (this.y > height) {
                    this.y = 0;
                    this.x = Math.random() * width;
                }
            }

            draw() {
                ctx.fillStyle = 'white';
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fill();
            }
        }

        class Ball {
            constructor() {
                this.x = width / 2;
                this.y = height / 2;
                this.size = 20;
                this.dx = (Math.random() - 0.5) * 10;
                this.dy = (Math.random() - 0.5) * 10;
                this.color = 'white';
            }

            update() {
                this.x += this.dx * speed;
                this.y += this.dy * speed;

                if (this.x - this.size < 0 || this.x + this.size > width) {
                    this.dx = -this.dx;
                }
                if (this.y - this.size < 0 || this.y + this.size > height) {
                    this.dy = -this.dy;
                }
            }

            draw() {
                ctx.fillStyle = this.color;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fill();

                ctx.shadowBlur = 20;
                ctx.shadowColor = 'rgba(255, 255, 255, 0.5)';
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fill();
                ctx.shadowBlur = 0;
            }
        }

        function init() {
            butterflies = [];
            for (let i = 0; i < targetButterflyCount; i++) {
                butterflies.push(new Butterfly());
            }
            for (let i = 0; i < 200; i++) {
                stars.push(new Star());
            }
            ball = new Ball();
        }

        function animate() {
            ctx.fillStyle = 'rgba(0, 0, 0, 0.1)';
            ctx.fillRect(0, 0, width, height);

            stars.forEach(star => {
                star.update();
                star.draw();
            });

            ball.update();
            ball.draw();

            butterflies.forEach((butterfly, index) => {
                butterfly.update();
                butterfly.draw();
            });

            // Adjust butterfly count
            if (butterflies.length < targetButterflyCount) {
                butterflies.push(new Butterfly());
            } else if (butterflies.length > targetButterflyCount) {
                butterflies.pop();
            }

            requestAnimationFrame(animate);
        }

        function changeSpeed(factor) {
            speed *= factor;
            speed = Math.max(0.1, Math.min(speed, 10));
        }

        function updateButterflyCount() {
            targetButterflyCount = parseInt(document.getElementById('butterflyCountInput').value);
            targetButterflyCount = Math.max(1, Math.min(targetButterflyCount, 100000));
            document.getElementById('butterflyCountInput').value = targetButterflyCount;
        }

        function updateBallSize() {
            ball.size = parseInt(document.getElementById('ballSize').value);
            document.getElementById('ballSizeValue').textContent = ball.size;
        }

        function updateBallSpeed() {
            let newSpeed = parseInt(document.getElementById('ballSpeed').value);
            document.getElementById('ballSpeedValue').textContent = newSpeed;
            let currentSpeed = Math.sqrt(ball.dx * ball.dx + ball.dy * ball.dy);
            let factor = newSpeed / currentSpeed;
            ball.dx *= factor;
            ball.dy *= factor;
        }

        function toggleButterflySettings() {
            let settings = document.getElementById('butterflySettings');
            settings.style.display = settings.style.display === 'none' ? 'block' : 'none';
        }

        function updateButterflySize() {
            let size = parseInt(document.getElementById('butterflySize').value);
            document.getElementById('butterflySizeValue').textContent = size;
            butterflies.forEach(butterfly => {
                butterfly.size = size + Math.random() * 10;
            });
        }

        function updateButterflySpeed() {
            let speed = parseFloat(document.getElementById('butterflySpeed').value);
            document.getElementById('butterflySpeedValue').textContent = speed.toFixed(1);
            butterflies.forEach(butterfly => {
                butterfly.speed = speed + Math.random() * 2;
            });
        }

        function updateButterflyWanderRadius() {
            let radius = parseInt(document.getElementById('butterflyWanderRadius').value);
            document.getElementById('butterflyWanderRadiusValue').textContent = radius;
            butterflies.forEach(butterfly => {
                butterfly.wanderRadius = radius;
            });
        }

        window.addEventListener('resize', () => {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
        });

        document.getElementById('toggleMenu').addEventListener('click', function() {
            let controls = document.getElementById('controls');
            if (controls.style.display === 'none') {
                controls.style.display = 'block';
                this.textContent = 'Hide Menu';
            } else {
                controls.style.display = 'none';
                this.textContent = 'Show Menu';
            }
        });

        init();
        animate();
    </script>
</body></html>